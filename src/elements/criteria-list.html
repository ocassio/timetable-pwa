<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-styles/default-theme.html">
<link rel="import" href="../../bower_components/paper-card/paper-card.html">

<dom-module id="criteria-list">

  <style>
    :host {
      display: flex;
      flex-direction: column;
      padding: 16px;
      max-width: 600px;
      margin: auto;
    }
    paper-card {
      width: 100%;
    }
  </style>

  <template>
    <template is="dom-repeat" items="[[criteria]]" as="criterion">
      <paper-card heading="[[criterion.name]]"></paper-card>
    </template>
  </template>

  <script>
    Polymer({

      is: 'criteria-list',

      properties: {
        criteriaType: {
          type: Number,
          value: 0,
          observer: 'onCriteriaTypeChanged'
        },
        criteria: {
          type: Array,
          value: []
        }
      },

      onCriteriaTypeChanged: function(criteriaType) {
        console.log(criteriaType);
        if (!criteriaType === undefined) return;
        $.get('https://timetable-api.azurewebsites.net/criteria/' + criteriaType, {}, this.onCriteriaLoaded.bind(this));
      },

      onCriteriaLoaded: function(response) {
        this.criteria = response;
      }

    });
  </script>

</dom-module>
